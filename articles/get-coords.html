<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>getCoords â€¢ pandemonium</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="getCoords">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pandemonium</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/datainput.html">Data input for pandemonium</a></li>
    <li><a class="dropdown-item" href="../articles/analysis-pages.html">Data Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/dim-reduction.html">dimReduction</a></li>
    <li><a class="dropdown-item" href="../articles/get-coords.html">getCoords</a></li>
    <li><a class="dropdown-item" href="../articles/get-scores.html">getScore</a></li>
    <li><a class="dropdown-item" href="../articles/make-plots.html">How to use make plots</a></li>
    <li><a class="dropdown-item" href="../articles/output.html">writeResults</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>getCoords</h1>
            
      

      <div class="d-none name"><code>get-coords.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette describes the usage of the <code>getCoords</code>
parameter in the <code>pandemonium</code> app.</p>
<p>This is an input for a named list of functions that can be used to
calculate coordinates. The names of the list will be used as options for
the coordinates selector in the GUI.</p>
<p>Coordinates are a way to put each variable on equal footing before
distance calculations. A simple coordinate function is normalising each
variable by subtracting the mean and dividing by the standard deviation.
The package includes a set of coordinate functions, but other forms are
also possible and can be defined as explained below.</p>
</div>
<div class="section level2">
<h2 id="provided-coordinate-functions">Provided coordinate functions<a class="anchor" aria-label="anchor" href="#provided-coordinate-functions"></a>
</h2>
<div class="section level4">
<h4 id="normcoords">
<code>normcoords</code><a class="anchor" aria-label="anchor" href="#normcoords"></a>
</h4>
<p>This uses <code>scale</code> to center and scale the data.</p>
</div>
<div class="section level4">
<h4 id="pullcoords">
<code>pullCoords()</code><a class="anchor" aria-label="anchor" href="#pullcoords"></a>
</h4>
<p>Chi-Squared Loss Function Coordinates</p>
</div>
<div class="section level4">
<h4 id="pullcoordsnocov">
<code>pullCoordsNoCov()</code><a class="anchor" aria-label="anchor" href="#pullcoordsnocov"></a>
</h4>
<p>Generic Loss Function Coordinates</p>
</div>
<div class="section level4">
<h4 id="rawcoords">
<code>rawCoords()</code><a class="anchor" aria-label="anchor" href="#rawcoords"></a>
</h4>
<p>Returns the data frame passed to it. This should only be used when
the data is already provided as coordinates or coordinate calculations
are otherwise impossible.</p>
</div>
<div class="section level3">
<h3 id="usercoords">
<code>userCoords()</code><a class="anchor" aria-label="anchor" href="#usercoords"></a>
</h3>
<p>Used for externally calculated coordinates, to cut down computation
time or where a coordinate function cannot otherwise be written. This is
a closure of a coordinate function that returns the user defined
coordinate matrix passed to the closure when called in the pandemonium
call with
<code>pandemonium(df, getCoords=list(user=userCoords(coordMatrix)))</code>.
This cannot be used when variables are removed from a space through the
GUI.</p>
<p>Externally calculated coordinates can be used through userCoords or
as input data with rawCoords used as the coordinate function. The use of
userCoords over rawCoords is in the treatment of input data. As
pandemonium displays the input data in many plots the use of coordinates
as input data will result in these plots being less meaningful for
interpretation. Use userCoords where coordinates are necessary to
calculate distances but interpretation from plots of clustering space is
necessary.</p>
</div>
</div>
<div class="section level2">
<h2 id="writing-getcoords-functions">Writing <code>getCoords</code> functions<a class="anchor" aria-label="anchor" href="#writing-getcoords-functions"></a>
</h2>
<div class="section level3">
<h3 id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Input</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>df</code></td>
<td>Data frame of raw values</td>
</tr>
<tr class="even">
<td><code>cov</code></td>
<td>Covariance matrix of data frame</td>
</tr>
<tr class="odd">
<td><code>covinv</code></td>
<td>Inverse covariance matrix of data frame</td>
</tr>
<tr class="even">
<td><code>exp</code></td>
<td>reference point</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="ouput">Ouput<a class="anchor" aria-label="anchor" href="#ouput"></a>
</h3>
<p>The function should return a single array the same size of the input
df and with the same column names as df.</p>
</div>
<div class="section level3">
<h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pullCoordsNoCov</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">cov</span>, <span class="va">exp</span>, <span class="va">...</span><span class="op">)</span><span class="op">{</span></span>
<span></span>
<span>  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span>  <span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span>  <span class="va">coord_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="va">nc</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">nc</span><span class="op">)</span><span class="op">{</span></span>
<span>      <span class="va">coord_mat</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">(</span><span class="va">df</span><span class="op">[</span><span class="va">i</span>, <span class="va">j</span><span class="op">]</span> <span class="op">-</span> <span class="va">exp</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">j</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">cov</span><span class="op">[</span><span class="va">j</span>, <span class="va">j</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">coord_mat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">coord_mat</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="../reference/pandemonium.html">pandemonium</a></span><span class="op">(</span><span class="va">df</span>,getCoords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pull <span class="op">=</span> <span class="va">pullCoordsNoCov</span>, normal <span class="op">=</span> <span class="va">normCoords</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel McCoy, Ursula Laa, German Valencia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
